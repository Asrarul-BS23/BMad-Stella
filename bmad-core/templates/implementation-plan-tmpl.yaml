# <!-- Powered by Stella Development Team -->

template:
  id: implementation-plan-template-v1
  name: Implementation Plan Document
  version: 1.0
  output:
    format: markdown
    filename: bmad-docs/impl-plan/{{ticket_number}}-{{ticket_title_short}}.md
    title: "Implementation Plan: {{ticket_number}} - {{title}}"

workflow:
  mode: interactive
  elicitation: advanced-elicitation

agent_config:
  editable_sections:
    - Status
    - Ticket Information
    - Requirements
    - Acceptance Criteria
    - Technical Approach
    - Tasks / Subtasks
    - Dependencies and Risks
    - Change Log

sections:
  - id: status
    title: Status
    type: choice
    choices: [Draft - Awaiting Review, Approved, In Progress, Under Review, Completed]
    instruction: Select the current status of the implementation plan
    owner: planner
    editors: [planner, dev-agent]

  - id: ticket-info
    title: Ticket Information
    instruction: Core information about the JIRA ticket
    owner: planner
    editors: [planner]
    sections:
      - id: ticket-number
        title: Ticket Number
        type: text
        template: "{{ticket_number}}"
        instruction: JIRA ticket number (e.g., PROJ-123)
        elicit: true
        owner: planner
        editors: [planner]

      - id: ticket-type
        title: Ticket Type
        type: choice
        choices: [Feature, Bug, Migration]
        instruction: Type of work to be performed
        elicit: true
        owner: planner
        editors: [planner]

      - id: title
        title: Title
        type: text
        template: "{{title}}"
        instruction: Brief, descriptive title of the ticket
        elicit: true
        owner: planner
        editors: [planner]

      - id: description
        title: Description
        type: multiline-text
        instruction: Full description from JIRA ticket or derived from analysis
        elicit: true
        owner: planner
        editors: [planner]

      - id: original-source
        title: Original Source
        instruction: |
          Reference to original input (file path, screenshot, or inline text).
          This helps track where the ticket information came from.
        owner: planner
        editors: [planner]

  - id: requirements
    title: Requirements
    type: numbered-list
    instruction: |
      Explicit functional and non-functional requirements.
      If not provided in ticket, derive from description and acceptance criteria.
      Each requirement should be clear, specific, and testable.
    elicit: true
    owner: planner
    editors: [planner]

  - id: acceptance-criteria
    title: Acceptance Criteria
    type: numbered-list
    instruction: |
      Specific, testable conditions that must be met for the ticket to be considered complete.
      If not provided in ticket, derive based on requirements and ticket type.
      Format: Clear, actionable statements that can be verified.
    elicit: true
    owner: planner
    editors: [planner]

  - id: technical-approach
    title: Technical Approach
    type: multiline-text
    instruction: |
      Concise technical strategy and essential implementation details.
      Written by planner as a senior developer guiding junior developers.

      Include:
      - Overall strategy and major components
      - File locations (new files to create, existing files to modify)
      - Key design patterns and code patterns to follow
      - API/database design (if applicable)
      - Technologies and frameworks to use
      - Cite architecture docs where applicable
    elicit: true
    owner: planner
    editors: [planner]

  - id: tasks-subtasks
    title: Tasks / Subtasks
    type: bullet-list
    instruction: |
      Sequential task breakdown with checkboxes [ ].
      Tasks should be logical implementation steps, not overly granular.
      Subtasks shouldn't be micro-tasks like "create file" or "add xyz to file".
      Number of tasks and subtasks should be based on ticket length and complexity - Simple (3-5 tasks), Medium (5-8 tasks), Complex (8-12 tasks).
      Reference acceptance criteria numbers where relevant (AC: #).
    template: |
      - [ ] Task 1 (AC: # if applicable)
        - [ ] Subtask 1.1...
      - [ ] Task 2 (AC: # if applicable)
        - [ ] Subtask 2.1...
      - [ ] Task 3 (AC: # if applicable)
        - [ ] Subtask 3.1...
    elicit: true
    owner: planner
    editors: [planner, dev-agent]

  - id: dependencies-and-risks
    title: Dependencies and Risks
    instruction: |
      Technical dependencies and potential blockers.
      Identifies what must be in place and what might prevent smooth implementation.
    owner: planner
    editors: [planner]
    sections:
      - id: dependencies
        title: Dependencies
        instruction: |
          Dependencies that must be in place:
          - Other tickets that must be completed first
          - Infrastructure requirements
          - Third-party service availability
          - Library or framework versions needed
          - External dependencies
        owner: planner
        editors: [planner]

      - id: blockers
        title: Blockers
        instruction: |
          Known blockers or significant risks (optional - only include if applicable):
          - Missing requirements or unclear specifications
          - Technical limitations that need resolution
          - Critical resource constraints
          - Blocking external dependencies
          - Rollback plans needed (especially for migrations)
        owner: planner
        editors: [planner]

  - id: test-implementation-notes
    title: Testing
    instruction: This section is populated by the qa agent during test implementation
    owner: qa-agent
    editors: [qa-agent]

  - id: change-log
    title: Change Log
    type: table
    columns: [Date, Version, Description, Author]
    instruction: Track changes made to this implementation plan
    owner: planner
    editors: [planner, dev-agent]

  - id: dev-agent-record
    title: Dev Agent Record
    instruction: This section is populated by the development agent during implementation
    owner: dev-agent
    editors: [dev-agent]
    sections:
      - id: agent-model
        title: Agent Model Used
        template: "{{agent_model_name_version}}"
        instruction: Record the specific AI agent model and version used for development
        owner: dev-agent
        editors: [dev-agent]

      - id: debug-log-references
        title: Debug Log
        instruction: Reference any debug logs or traces generated during development/ or qa-testing
        owner: dev-agent
        editors: [dev-agent, qa-agent]

      - id: file-list
        title: File List
        instruction: List all files created, modified, or affected during story implementation
        owner: dev-agent
        editors: [dev-agent]

  - id: feedback
    title: Feedback
    type: multiline-text
    instruction: |
      Consolidated feedback from reviews and refinements.
      Include feedback from planner reviews, code reviews, or QA testing.
      Use Change Log to track when feedback was incorporated.
    owner: planner
    editors: [planner, dev-agent, qa-agent]
